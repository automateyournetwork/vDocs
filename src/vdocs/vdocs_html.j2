{%- include 'datatable_header.j2' %}
{%- if api == "/dataservice/device" %}
<h1>Fabric Devices</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>Hostname</th>
    <th>Device ID</th>
    <th>Board Serial</th>
    <th>Certificate Validity</th>
    <th>Connected vManages</th>
    <th>Control Connections</th>
    <th>Device Groups</th>
    <th>Device Model</th>
    <th>Device OS</th>
    <th>Device Type</th>
    <th>Domain ID</th>
    <th>Is Device Geo Data</th>
    <th>Last Updated</th>
    <th>Latitude</th>
    <th>Longitude</th>
    <th>Layout Level</th>
    <th>Local System IP</th>
    <th>Max Controllers</th>
    <th>Model SKU</th>
    <th>Personality</th>
    <th>Platform</th>
    <th>Reachability</th>
    <th>Site ID</th>
    <th>State</th>
    <th>State Description</th>
    <th>Status</th>
    <th>Status Order</th>
    <th>System IP</th>
    <th>Testbed Mode</th>
    <th>Timezone</th>
    <th>Total CPU Count</th>
    <th>Uptime Date</th>
    <th>UUID</th>
    <th>Validity</th>
    <th>Version</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
    <tr>
        <td>{{ device['host-name'] }}</td>
    <td>{{ device.deviceId }}</td>
    <td>{{ device['board-serial'] }}</td>
    <td>{{ device['certificate-validity'] }}</td>
    <td>{{ device.connectedVManages | replace("\\","") | replace('"','') | replace(","," ") | replace("'","") | replace("[","") | replace("]","") }}</td>
    <td>{{ device.controlConnections }}</td>
    <td>{{ device['device-groups'] | replace("\\","") | replace('"','') | replace(","," ") | replace("'","") | replace("[","") | replace("]","") }}</td>
    <td>{{ device['device-model'] }}</td>
    <td>{{ device['device-os'] }}</td>
    <td>{{ device['device-type'] }}</td>
    <td>{{ device['domain-id'] }}</td>
    <td>{{ device.isDeviceGeoData }}</td>
    <td>{{ device.lastupdated }}</td>
    <td>{{ device.latitude }}</td>
    <td>{{ device.longitude }}</td>
    <td>{{ device.layoutLevel }}</td>
    <td>{{ device['local-system-ip'] }}</td>
    <td>{{ device['max-controllers'] }}</td>
    <td>{{ device.model_sku }}</td>
    <td>{{ device.personality }}</td>
    <td>{{ device.platform }}</td>
    <td>{{ device.reachability }}</td>
    <td>{{ device['site-id'] }}</td>
    <td>{{ device.state }}</td>
    <td>{{ device.state_description }}</td>
    <td>{{ device.status }}</td>
    <td>{{ device.statusOrder }}</td>
    <td>{{ device['system-ip'] }}</td>
    <td>{{ device.testbed_mode }}</td>
    <td>{{ device.timezone }}</td>
    <td>{{ device.total_cpu_count }}</td>
    <td>{{ device['uptime-date'] }}</td>
    <td>{{ device.uuid }}</td>
    <td>{{ device.validity }}</td>
    <td>{{ device.version }}</td>
    </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/device/monitor"%}
<h1>Device Status</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>Hostname</th>
    <th>Device Model</th>
    <th>Device Type</th>
    <th>Layout Level</th>
    <th>Site ID</th>
    <th>Status</th>
    <th>System IP</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['host-name'] }}</td>
    <td>{{ device['device-model'] }}</td>
    <td>{{ device['device-type'] }}</td>
    <td>{{ device.layoutLevel }}</td>
    <td>{{ device['site-id'] }}</td>
    <td>{{ device.status }}</td>
    <td>{{ device['system-ip'] }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/device/counters"%}
<h1>Device Counters</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>System IP</th>
    <th>BFD Sessions Down</th>
    <th>BFD Sessions Up</th>
    <th>Crash Count</th>
    <th>Expected Control Connections</th>
    <th>Number vSmart Control Connections</th>
    <th>OMP Peers Down</th>
    <th>OMP Peers Up</th>
    <th>Reboot Count</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['system-ip'] }}</td>
    <td>{{ device.bfdSessionsDown | default("N/A") }}</td>
    <td>{{ device.bfdSessionsUp | default("N/A") }}</td>
    <td>{{ device.crashCount }}</td>
    <td>{{ device.expectedControlConnections | default("N/A") }}</td>
    <td>{{ device['number-vsmart-control-connections'] }}</td>
    <td>{{ device.ompPeersDown | default("N/A") }}</td>
    <td>{{ device.ompPeersUp | default("N/A") }}</td>
    <td>{{ device.rebootCount }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/template/feature"%}
<h1>Template Features</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>Device Type</th>
    <th>Template Name</th>
    <th>Attached Masters Count</th>
    <th>Config Type</th>
    <th>Created By</th>
    <th>Created On</th>
    <th>Devices Attached</th>
    <th>Factory Default</th>
    <th>Last Updated By</th>
    <th>Last Updated On</th>
    <th>Template Description</th>
    <th>Template ID</th>
    <th>Template Min Version</th>
    <th>Template Type</th>
    <th>Template Definition</th>
  </tr>
</thead>  
<tbody>
{%-     for template in data_to_template['data'] %}
{%-         for device in template['deviceType'] %}
  <tr>
    <td>{{ device }}</td>
    <td>{{ template.templateName }}</td>
    <td>{{ template.attachedMastersCount }}</td>
    <td>{{ template.configType }}</td>
    <td>{{ template.createdBy }}</td>
    <td>{{ template.createdOn }}</td>
    <td>{{ template.devicesAttached }}</td>
    <td>{{ template.factoryDefault }}</td>
    <td>{{ template.lastUpdatedBy }}</td>
    <td>{{ template.lastUpdatedOn }}</td>
    <td>{{ template.templateDescription }}</td>
    <td>{{ template.templateId }}</td>
    <td>{{ template.templateMinVersion }}</td>
    <td>{{ template.templateType }}</td>
    <td>{{ template.templateDefinition }}</td>
  </tr>
{%-         endfor %}
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/template/feature/types"%}
<h1>Template Feature Types</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>Name</th>
    <th>Display Name</th>
    <th>Default</th>
    <th>Description</th>
    <th>Device Models</th>
    <th>Helper Type</th>
    <th>Parent</th>
    <th>Type Class</th>
  </tr>
</thead>  
<tbody>
{%-     for type in data_to_template['data'] %}
{%-         for device_model in type['deviceModels'] %}
  <tr>
    <td>{{ type.name }}</td>
    <td>{{ type.displayName }}</td>
    <td>{{ type.default }}</td>
    <td>{{ type.description }}</td>
    <td>{{ device_model.name }}</td>
    <td>{{ type.helperType }}</td>
    <td>{{ type.parent }}</td>
    <td>{{ type.typeClass }}</td>
  </tr>
{%-         endfor %}
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/template/policy/vedge/devices"%}
<h1>vEdge Devices</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>Hostname</th>
    <th>Layout Level</th>
    <th>Local System IP</th>
    <th>Site ID</th>
    <th>UUID</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['host-name'] }}</td>
    <td>{{ device.layoutLevel }}</td>
    <td>{{ device['local-system-ip'] }}</td>
    <td>{{ device['site-id'] }}</td>
    <td>{{ device.uuid }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/template/policy/list"%}
<h1>Template Policy List</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Jitter</th>
    <th>Latency</th>
    <th>Loss</th>
    <th>Application</th>
    <th>VPN</th>
    <th>Site ID</th>
    <th>IP Prefix</th>
    <th>Info Tag</th>
    <th>Is Activated By VSmart</th>
    <th>Last Updated</th>
    <th>List ID</th>
    <th>Owner</th>
    <th>Read Only</th>
    <th>Reference Count</th>
    <th>Reference ID</th>
    <th>Reference Type</th>
    <th>Type</th>
    <th>Version</th>
  </tr>
</thead>  
<tbody>
{%-     for policy in data_to_template['data'] %}
{%-         for entry in policy['entries'] %}
  <tr>
    <td>{{ policy.name }}</td>
    <td>{{ policy.description }}</td>
    {%- if "jitter" in entry %}
    <td>{{ entry.jitter }}</td>
    <td>{{ entry.latency }}</td>
    <td>{{ entry.loss }}</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    {%- elif "app" in entry %}
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>{{ entry.app }}</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    {%- elif "vpn" in entry %}
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>{{ entry.vpn }}</td>
    <td>N/A</td>
    <td>N/A</td>
    {%- elif "siteId" in entry %}
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>{{ entry.siteId }}</td>
    <td>N/A</td>
    {%- elif "ipPrefix" in entry %}
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>{{ entry.ipPrefix }}</td>
    {%- endif %}
    <td>{{ policy.infoTag }}</td>
    <td>{{ policy.isActivatedByVsmart }}</td>
    <td>{{ policy.lastUpdated }}</td>
    <td>{{ policy.listId }}</td>
    <td>{{ policy.owner }}</td>
    <td>{{ policy.readOnly }}</td>
    <td>{{ policy.referenceCount }}</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>{{ policy.type }}</td>
    <td>{{ policy.version }}</td>
  </tr>
{%-         endfor %}
{%-         for reference in policy['references'] %}
  <tr>
    <td>{{ policy.name }}</td>
    <td>{{ policy.description }}</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>{{ policy.infoTag }}</td>
    <td>{{ policy.isActivatedByVsmart }}</td>
    <td>{{ policy.lastUpdated }}</td>
    <td>{{ policy.listId }}</td>
    <td>{{ policy.owner }}</td>
    <td>{{ policy.readOnly }}</td>
    <td>{{ policy.referenceCount }}</td>
    <td>{{ reference.id }}</td>
    <td>{{ reference.type }}</td>
    <td>{{ policy.type }}</td>
    <td>{{ policy.version }}</td>
  </tr>
{%-         endfor %}
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/data/device/state/BFDSessions"%}
<h1>BFD Sessions</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>@RID</th>
    <th>Color</th>
    <th>Create Timestamp</th>
    <th>Detect Multiplier</th>
    <th>Destination IP</th>
    <th>Destination Port</th>
    <th>Last Updated</th>
    <th>Local Color</th>
    <th>Protocol</th>
    <th>Record ID</th>
    <th>Site ID</th>
    <th>Source IP</th>
    <th>Source Port</th>
    <th>State</th>
    <th>System IP</th>
    <th>Transitions</th>
    <th>TX Interval</th>
    <th>Uptime Date</th>
    <th>vDevice Data Key</th>
    <th>vDevice Hostname</th>
    <th>vDevice Name</th>
    <th>vManage System IP</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['@rid'] }}</td>
    <td>{{ device.color }}</td>
    <td>{{ device.createTimeStamp }}</td>
    <td>{{ device['detect-multiplier'] }}</td>
    <td>{{ device['dst-ip'] }}</td>
    <td>{{ device['dst-port'] }}</td>
    <td>{{ device.lastupdated }}</td>
    <td>{{ device['local-color'] }}</td>
    <td>{{ device.proto }}</td>
    <td>{{ device.recordId }}</td>
    <td>{{ device['site-id'] }}</td>
    <td>{{ device['src-ip'] }}</td>
    <td>{{ device['src-port'] }}</td>
    <td>{{ device.state }}</td>
    <td>{{ device['system-ip'] }}</td>
    <td>{{ device.transitions }}</td>
    <td>{{ device['tx-interval'] }}</td>
    <td>{{ device['uptime-date'] }}</td>
    <td>{{ device['vdevice-dataKey'] }}</td>
    <td>{{ device['vdevice-host-name'] }}</td>
    <td>{{ device['vdevice-name'] }}</td>
    <td>{{ device['vmanage-system-ip'] }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/data/device/state/ControlConnection"%}
<h1>Control Connections</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>@RID</th>
    <th>Behind Proxy</th>
    <th>Controller Group ID</th>
    <th>Create Timestamp</th>
    <th>Domain ID</th>
    <th>Instance</th>
    <th>Last Updated</th>
    <th>Local Color</th>
    <th>Peer Type</th>
    <th>Private IP</th>
    <th>Private Port</th>
    <th>Protocol</th>
    <th>Public IP</th>
    <th>Public Port</th>
    <th>Record ID</th>
    <th>Remote Color</th>
    <th>Site ID</th>
    <th>State</th>
    <th>System IP</th>
    <th>Uptime Date</th>
    <th>vDevice Data Key</th>
    <th>vDevice Hostname</th>
    <th>vDevice Name</th>
    <th>vManage System IP</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['@rid'] }}</td>
    <td>{{ device['behind-proxy'] }}</td>
    <td>{{ device['controller-group-id'] }}</td>
    <td>{{ device.createTimeStamp }}</td>
    <td>{{ device['domain-id'] }}</td>
    <td>{{ device.instance }}</td>
    <td>{{ device.lastupdated }}</td>
    <td>{{ device['local-color'] }}</td>
    <td>{{ device['peer-type'] }}</td>
    <td>{{ device['private-ip'] }}</td>
    <td>{{ device['private-port'] }}</td>
    <td>{{ device.protocol }}</td>
    <td>{{ device['public-ip'] }}</td>
    <td>{{ device['public-port'] }}</td>
    <td>{{ device.recordId }}</td>
    <td>{{ device['remote-color'] }}</td>
    <td>{{ device['site-id'] }}</td>
    <td>{{ device.state }}</td>
    <td>{{ device['system-ip'] }}</td>
    <td>{{ device['uptime-date'] }}</td>
    <td>{{ device['vdevice-dataKey'] }}</td>
    <td>{{ device['vdevice-host-name'] }}</td>
    <td>{{ device['vdevice-name'] }}</td>
    <td>{{ device['vmanage-system-ip'] }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/data/device/state/ControlLocalProperty"%}
<h1>Control Local Property</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>@RID</th>
    <th>Board Serial</th>
    <th>Certificate Not Valid After</th>
    <th>Certificate Not Valid Before</th>
    <th>Certificate Status</th>
    <th>Certificate Validity</th>
    <th>Create Timestamp</th>
    <th>Device Type</th>
    <th>DNS Name</th>
    <th>Domain ID</th>
    <th>Keygen Interval</th>
    <th>Last Updated</th>
    <th>Max Controllers</th>
    <th>Number Active WAN Interfaces</th>
    <th>Number vBond Peers</th>
    <th>Organization Name</th>
    <th>Port Hopped</th>
    <th>Protocol</th>
    <th>Record ID</th>
    <th>Register Interval</th>
    <th>Retry Interval</th>
    <th>Root CA Chain Status</th>
    <th>Site ID</th>
    <th>SP Organization Name</th>
    <th>System IP</th>
    <th>TLS Port</th>
    <th>Token</th>
    <th>UUID</th>
    <th>vDevice Data Key</th>
    <th>vDevice Hostname</th>
    <th>vDevice Name</th>
    <th>vEdge List Version</th>
    <th>vManage System IP</th>
    <th>vSmart List Version</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['@rid'] }}</td>
    <td>{{ device['board-serial'] }}</td>
    <td>{{ device['certificate-not-valid-after'] }}</td>
    <td>{{ device['certificate-not-valid-before'] }}</td>
    <td>{{ device['certificate-status'] }}</td>
    <td>{{ device['certificate-validity'] }}</td>
    <td>{{ device.createTimeStamp }}</td>
    <td>{{ device['device-type'] }}</td>
    <td>{{ device['dns-name'] }}</td>
    <td>{{ device['domain-id'] }}</td>
    <td>{{ device['keygen-interval'] }}</td>
    <td>{{ device.lastupdated }}</td>
    <td>{{ device['max-controllers'] }}</td>
    <td>{{ device['number-active-wan-interfaces'] }}</td>
    <td>{{ device['number-vbond-peers'] }}</td>
    <td>{{ device['organization-name'] }}</td>
    <td>{{ device['port-hopped'] }}</td>
    <td>{{ device.protocol }}</td>
    <td>{{ device.recordId }}</td>
    <td>{{ device['register-interval'] }}</td>
    <td>{{ device['retry-interval'] }}</td>
    <td>{{ device['root-ca-chain-status'] }}</td>
    <td>{{ device['site-id'] }}</td>
    <td>{{ device['sp-organization-name'] }}</td>
    <td>{{ device['system-ip'] }}</td>
    <td>{{ device['tls-port'] }}</td>
    <td>{{ device.token }}</td>
    <td>{{ device.uuid }}</td>
    <td>{{ device['vdevice-dataKey'] }}</td>
    <td>{{ device['vdevice-host-name'] }}</td>
    <td>{{ device['vdevice-name'] }}</td>
    <td>{{ device['vedge-list-version'] }}</td>
    <td>{{ device['vmanage-system-ip'] }}</td>
    <td>{{ device['vsmart-list-version'] }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/data/device/state/ControlWanInterface"%}
<h1>Control WAN Interface</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>@RID</th>
    <th>Admin State</th>
    <th>Carrier</th>
    <th>Color</th>
    <th>Create Timestamp</th>
    <th>Index</th>
    <th>Instance</th>
    <th>Interface</th>
    <th>Last Updated</th>
    <th>Number vManages</th>
    <th>Number vSmarts</th>
    <th>Operation State</th>
    <th>Private IP</th>
    <th>Private IPv6</th>
    <th>Private Port</th>
    <th>Public IP</th>
    <th>Public Port</th>
    <th>Record ID</th>
    <th>vDevice Data Key</th>
    <th>vDevice Hostname</th>
    <th>vDevice Name</th>
    <th>vManage System IP</th>
    <th>WAN Port Hopped</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['@rid'] }}</td>
    <td>{{ device['admin-state'] }}</td>
    <td>{{ device.carrier }}</td>
    <td>{{ device.color }}</td>
    <td>{{ device.createTimeStamp }}</td>
    <td>{{ device.index }}</td>
    <td>{{ device.instance }}</td>
    <td>{{ device.interface }}</td>
    <td>{{ device.lastupdated }}</td>
    <td>{{ device['num-vmanages'] }}</td>
    <td>{{ device['num-vsmarts'] }}</td>
    <td>{{ device['operation-state'] }}</td>
    <td>{{ device['private-ip'] }}</td>
    <td>{{ device['private-ipv6'] }}</td>
    <td>{{ device['private-port'] }}</td>
    <td>{{ device['public-ip'] }}</td>
    <td>{{ device['public-port'] }}</td>
    <td>{{ device.recordId }}</td>
    <td>{{ device['vdevice-dataKey'] }}</td>
    <td>{{ device['vdevice-host-name'] }}</td>
    <td>{{ device['vdevice-name']}}</td>
    <td>{{ device['vmanage-system-ip'] }}</td>
    <td>{{ device['wan-port-hopped'] }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- elif api == "/dataservice/data/device/state/HardwareEnvironment"%}
<h1>Hardware Environment</h1>
<table id = "datatable">
<thead>
  <tr>
    <th>@RID</th>
    <th>Create Timestamp</th>
    <th>Hardware Class</th>
    <th>Hardware Dev Index</th>
    <th>Hardware Item</th>
    <th>Last Updated</th>
    <th>Measurement</th>
    <th>Record ID</th>
    <th>Status</th>
    <th>vDevice Data Key</th>
    <th>vDevice Hostname</th>
    <th>vDevice Name</th>
    <th>vManage System IP</th>
  </tr>
</thead>  
<tbody>
{%-     for device in data_to_template['data'] %}
  <tr>
    <td>{{ device['@rid'] }}</td>
    <td>{{ device.createTimeStamp }}</td>
    <td>{{ device['hw-class'] }}</td>
    <td>{{ device['hw-dev-index'] }}</td>
    <td>{{ device['hw-item'] }}</td>
    <td>{{ device.lastupdated }}</td>
    <td>{{ device.measurement }}</td>
    <td>{{ device.recordId }}</td>
    <td>{{ device.status }}</td>
    <td>{{ device['vdevice-dataKey'] }}</td>
    <td>{{ device['vdevice-host-name'] }}</td>
    <td>{{ device['vdevice-name'] }}</td>
    <td>{{ device['vmanage-system-ip'] }}</td>
  </tr>
{%-     endfor %}
</tbody>
</table>
{%- endif %}
{%- include 'datatable_footer.j2' %}